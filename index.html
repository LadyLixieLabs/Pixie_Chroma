<html>
	<head>
		<title>Pixie Chroma by Lixie Labs</title>
		
		<link rel="preconnect" href="https://fonts.googleapis.com">
		<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
		<link href="https://fonts.googleapis.com/css2?family=Raleway:wght@800&family=Source+Sans+Pro:wght@200;400;900&display=swap" rel="stylesheet">
		
		<style>
			body{
				color:#cccccc;
				background-color:#080808;
				margin:0px;
				padding:0px;
				font-family: 'Source Sans Pro', sans-serif;
			}
			a{
				color:#ff5c93;
				text-decoration:none;
			}
			#logo{
				height: 50px;
				margin-left: 10px;
				margin-top: 10px;
				margin-right: 20px;
			}
			#content_frame{
				width:100%;
				height:calc(100% - 77px);
				border:none;
			}
			#header{
				max-height: 75px;
				background-color: #181818;
				border-bottom: 2px solid #242424;
			}
			.menu_link{
				font-family: 'Raleway', sans-serif;
				display: inline-block;
				height: 20px;
				position: relative;
				top: -20px;
				padding-top: 10px;
				padding-bottom: 10px;
				padding-left: 10px;
				padding-right: 10px;
				color: #000;
				background-color: #ff5c93;
				margin-right: 10px;
				text-transform: uppercase;
			}
			.menu_link:hover, .menu_link_select{
				padding-top: 25px;
				padding-bottom: 25px;
				padding-left: 10px;
				padding-right: 10px;
				cursor:pointer;
			}
			#logo_container{
			    display: inline-block;
				max-width: 430px;
				overflow: hidden;
			}
		</style>
	</head>
	<body>
		<div id="header">
			<span id="logospan">
				<div id="logo_container">
					<a href="https://connornishijima.github.io/Pixie_Chroma/">
						<img src="extras/img/logo_dot_matrix.png" id="logo"/>
					</a>
				</div>
			</span>
			<span id="menu_links">
				
			</span>
		</div>
		<iframe id="content_frame" name="content_frame" src="https://connornishijima.github.io/Pixie_Chroma/docs/class_pixie_chroma.html"></iframe>

		<script>
			var menu_links = [
				{
					"name":"Library Documentation",
					"short":"docs",
					"link":"https://connornishijima.github.io/Pixie_Chroma/docs/class_pixie_chroma.html",
					"target":"content_frame"
				},
				{
					"name":"Datasheet",
					"short":"datasheet",
					"link":"https://connornishijima.github.io/Pixie_Chroma/extras/datasheet.html",
					"target":"content_frame"
				},
				{
					"name":"GitHub",
					"short":"github",
					"link":"https://github.com/connornishijima/Pixie_Chroma/#readme",
					"target":"window"
				},
			];
	
			function update_page(section){
				var elems = document.querySelectorAll(".menu_link");
				[].forEach.call(elems, function(el) {
				    el.classList.remove("menu_link_select");
				});
				
				for(x in menu_links){
					var _link = menu_links[x]["link"];
					var _short = menu_links[x]["short"];
					var _target = menu_links[x]["target"];
					var _name = menu_links[x]["name"];
					
					if(_short == section && _target == "content_frame"){
						let stateObj = { id: "100" };
						window.history.replaceState(stateObj, _name, '/Pixie_Chroma/?section='+_short);
						document.getElementById(_short).className += " menu_link_select";
					}
				}
			}
			
			var menu_string = "";
			
			for(x in menu_links){
				var _link = menu_links[x]["link"];
				var _target = menu_links[x]["target"];
				var _name = menu_links[x]["name"];
				var _short = menu_links[x]["short"];
				menu_string += '<a href="' + _link + '" target="' + _target + '" class="menu_link" id="' + _short + '" onclick="update_page(\'' + _short + '\');">' + _name + '</a>\n';
			}
			
			console.log(menu_string);
			document.getElementById("menu_links").innerHTML = menu_string;
			
			const queryString = window.location.search;
			const urlParams = new URLSearchParams(queryString);
			
			if(urlParams.has('section')){
				const section = urlParams.get('section');
				for(x in menu_links){
					var _link = menu_links[x]["link"];
					var _short = menu_links[x]["short"];
					var _target = menu_links[x]["target"];
					var _name = menu_links[x]["name"];
					
					if(_short == section && _target == "content_frame"){
						document.getElementById(_short).className += " menu_link_select";
						document.getElementById("content_frame").src = _link;
					}
				}
				console.log("section: "+section);
			}
		</script>
	</body>
</html>
